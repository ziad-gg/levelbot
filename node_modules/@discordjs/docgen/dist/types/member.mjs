import{DocumentedItemMeta as d}from"./item-meta.mjs";import{DocumentedItem as u}from"./item.mjs";import{DocumentedParam as v}from"./param.mjs";import{DocumentedVarType as l}from"./var-type.mjs";import{parseType as g}from"../util/parseType.mjs";class b extends u{serializer(){if(this.config.typescript){const o=this.data,i=(o.signatures??[])[0]??o;let n;const m=o.sources?.[0];m&&(n=new d(m,this.config).serialize());const p=i.comment?.blockTags?.filter(e=>e.tag==="@see").length?i.comment.blockTags.filter(e=>e.tag==="@see").map(e=>e.content.find(r=>r.kind==="text")?.text.trim()):void 0,c={name:i.name,description:i.comment?.summary?.reduce((e,r)=>e+=r.text,"").trim()||void 0,see:p,scope:o.flags.isStatic?"static":void 0,access:o.flags.isPrivate||i.comment?.blockTags?.some(e=>e.tag==="@private"||e.tag==="@internal")?"private":void 0,readonly:o.flags.isReadonly,abstract:i.comment?.blockTags?.some(e=>e.tag==="@abstract")||void 0,deprecated:i.comment?.blockTags?.some(e=>e.tag==="@deprecated")?i.comment.blockTags.find(e=>e.tag==="@deprecated")?.content.reduce((e,r)=>e+=r.text,"").trim()??!0:void 0,default:(o.defaultValue==="..."?void 0:o.defaultValue)??(i.comment?.blockTags?.find(e=>e.tag==="@default")?.content.reduce((e,r)=>e+=r.text,"").trim()||void 0),type:i.type?new l({names:[g(i.type)]},this.config).serialize():void 0,meta:n};if(o.kindString==="Accessor"){const e=o.getSignature,r=o.setSignature;if(!e)throw new Error("Can't parse accessor without getter.");r||(c.readonly=!0);const f=e.comment?.blockTags?.filter(t=>t.tag==="@see").length?e.comment.blockTags.filter(t=>t.tag==="@see").map(t=>t.content.find(s=>s.kind==="text")?.text.trim()):void 0;return{...c,description:e.comment?.summary?.reduce((t,s)=>t+=s.text,"").trim()||void 0,see:f,access:o.flags.isPrivate||e.comment?.blockTags?.some(t=>t.tag==="@private"||t.tag==="@internal")?"private":void 0,readonly:c.readonly||!r,abstract:e.comment?.blockTags?.some(t=>t.tag==="@abstract")||void 0,deprecated:e.comment?.blockTags?.some(t=>t.tag==="@deprecated")?e.comment.blockTags.find(t=>t.tag==="@deprecated")?.content.reduce((t,s)=>t+=s.text,"").trim()??!0:void 0,default:c.default??(e.comment?.blockTags?.find(t=>t.tag==="@default")?.content.reduce((t,s)=>t+=s.text,"").trim()||void 0),type:e.type?g(e.type):void 0}}return c}const a=this.data;return{name:a.name,description:a.description,see:a.see,scope:a.scope,access:a.access,readonly:a.readonly,nullable:a.nullable,abstract:a.virtual,deprecated:a.deprecated,default:a.default,type:new l(a.type,this.config).serialize(),props:a.properties?.length?a.properties.map(o=>new v(o,this.config).serialize()):void 0,meta:new d(a.meta,this.config).serialize()}}}export{b as DocumentedMember};
//# sourceMappingURL=member.mjs.map
