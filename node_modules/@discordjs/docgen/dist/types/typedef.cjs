"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const v=require("./item-meta.cjs"),k=require("./item.cjs"),T=require("./param.cjs"),d=require("./var-type.cjs"),p=require("../util/parseType.cjs"),x=require("../util/types.cjs");class D extends k.DocumentedItem{serializer(){if(this.config.typescript){const i=this.data,m=(i.signatures??[])[0]??i;let g;const y=i.sources?.[0];y&&(g=new v.DocumentedItemMeta(y,this.config).serialize());const h=m.comment?.blockTags?.filter(t=>t.tag==="@see").length?m.comment.blockTags.filter(t=>t.tag==="@see").map(t=>t.content.find(c=>c.kind==="text")?.text.trim()):void 0,u={name:m.name,description:m.comment?.summary?.reduce((t,c)=>t+=c.text,"").trim()||void 0,see:h,access:i.flags.isPrivate||m.comment?.blockTags?.some(t=>t.tag==="@private"||t.tag==="@internal")?"private":void 0,deprecated:m.comment?.blockTags?.some(t=>t.tag==="@deprecated")?m.comment.blockTags.find(t=>t.tag==="@deprecated")?.content.reduce((t,c)=>t+=c.text,"").trim()??!0:void 0,type:m.type?new d.DocumentedVarType({names:[p.parseType(m.type)]},this.config).serialize():void 0,meta:g};let l;if(x.isReflectionType(i.type))l=i.type.declaration;else if(i.kindString==="Interface")l=i;else if(i.kindString==="Enumeration")return{...u,props:i.children?.length?i.children.map(t=>({name:t.name,description:t.comment?.summary?.reduce((c,n)=>c+=n.text,"").trim()||void 0,type:[[[t.type?.value]]]})):void 0};if(l){const{children:t,signatures:c}=l;if(t&&t.length>0){const n=t.map(a=>({name:a.name,description:a.comment?.summary?.reduce((o,e)=>o+=e.text,"").trim()||a.signatures?.[0]?.comment?.summary?.reduce((o,e)=>o+=e.text,"").trim()||void 0,optional:a.flags.isOptional||typeof a.defaultValue<"u",default:(a.defaultValue==="..."?void 0:a.defaultValue)??(a.comment?.blockTags?.find(o=>o.tag==="@default")?.content.reduce((o,e)=>o+=e.text,"").trim()||void 0),type:a.type?new d.DocumentedVarType({names:[p.parseType(a.type)]},this.config).serialize():a.kindString==="Method"?new d.DocumentedVarType({names:[p.parseType({type:"reflection",declaration:a})],description:a.signatures?.[0]?.comment?.blockTags?.find(o=>o.tag==="@returns")?.content.reduce((o,e)=>o+=e.text,"").trim()},this.config).serialize():void 0}));return{...u,props:n}}if(c&&c.length>0){const n=c[0],a=n?.parameters?.map(e=>({name:e.name,description:e.comment?.summary?.reduce((r,f)=>r+=f.text,"").trim()||void 0,optional:e.flags.isOptional||typeof e.defaultValue<"u",default:(e.defaultValue==="..."?void 0:e.defaultValue)??(e.comment?.blockTags?.find(r=>r.tag==="@default")?.content.reduce((r,f)=>r+=f.text,"").trim()||void 0),type:e.type?new d.DocumentedVarType({names:[p.parseType(e.type)]},this.config).serialize():void 0})),o=n?.comment?.blockTags?.filter(e=>e.tag==="@see").length?n.comment.blockTags.filter(e=>e.tag==="@see").map(e=>e.content.find(r=>r.kind==="text")?.text.trim()):void 0;return{...u,description:n?.comment?.summary?.reduce((e,r)=>e+=r.text,"").trim()||void 0,see:o,access:n?.flags.isPrivate||n?.comment?.blockTags?.some(e=>e.tag==="@private"||e.tag==="@internal")?"private":void 0,deprecated:n?.comment?.blockTags?.some(e=>e.tag==="@deprecated")?n.comment.blockTags.find(e=>e.tag==="@deprecated")?.content.reduce((e,r)=>e+=r.text,"").trim()??!0:void 0,params:a,returns:n?.type?[new d.DocumentedVarType({names:[p.parseType(n.type)],description:n.comment?.blockTags?.find(e=>e.tag==="@returns")?.content.reduce((e,r)=>e+=r.text,"").trim()||void 0},this.config).serialize()]:void 0,returnsDescription:n?.comment?.blockTags?.find(e=>e.tag==="@returns")?.content.reduce((e,r)=>e+=r.text,"").trim()||void 0,meta:g}}}return u}const s=this.data;return{name:s.name,description:s.description,see:s.see,access:s.access,deprecated:s.deprecated,type:new d.DocumentedVarType(s.type,this.config).serialize(),props:s.properties?.length?s.properties.map(i=>new T.DocumentedParam(i,this.config).serialize()):void 0,params:s.params?.length?s.params.map(i=>new T.DocumentedParam(i,this.config).serialize()):void 0,returns:s.returns?.length?s.returns.map(i=>new d.DocumentedVarType(i,this.config).serialize()):void 0,meta:new v.DocumentedItemMeta(s.meta,this.config).serialize()}}}exports.DocumentedTypeDef=D;
//# sourceMappingURL=typedef.cjs.map
